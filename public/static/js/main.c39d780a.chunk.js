(this["webpackJsonpmerng-client"]=this["webpackJsonpmerng-client"]||[]).push([[0],{184:function(e,t,n){},308:function(e,t,n){"use strict";n.r(t);var a=n(7),c=n(1),i=n.n(c),r=n(73),s=n.n(r),p=(n(184),n(177)),o=n(27),d=n(37),l=n.n(d),u=n(51),j=n(30),b=n.n(j);function _(){var e=Object(u.a)(["\nmutation updatePost($id: ID!,$title: String, $description: String){\n    updatePost(id: $id, title: $title, description: $description){\n        id\n        title\n        description\n    }\n}\n"]);return _=function(){return e},e}function O(){var e=Object(u.a)(["\nmutation deletePost($id: ID!){\n    deletePost(id: $id){\n        id\n    }\n}\n"]);return O=function(){return e},e}function h(){var e=Object(u.a)(["\nmutation addPost($title: String!,$description: String!){\n    addPost(title: $title,description: $description){\n        title\n        description\n    }\n}\n"]);return h=function(){return e},e}function x(){var e=Object(u.a)(["\nquery post($id: ID!){\n    post(id: $id){\n        title\n        description\n    }\n}\n"]);return x=function(){return e},e}function f(){var e=Object(u.a)(["\nquery posts{\n    posts{\n        id\n        title\n        description\n    }\n}\n"]);return f=function(){return e},e}var g=b()(f()),v=b()(x()),m=b()(h()),S=b()(O()),P=b()(_()),w=n(309),N=n(43),C=n(315),$=n(313),A=n(316),k=n(312),Q=n(311);var E=function(){var e=Object(c.useState)(""),t=Object(o.a)(e,2),n=t[0],i=t[1],r=Object(c.useState)(""),s=Object(o.a)(r,2),p=s[0],d=s[1],u=Object(w.useQuery)(g),j=u.loading,b=u.data,_=Object(c.useState)(),O=Object(o.a)(_,2),h=O[0],x=O[1];Object(c.useEffect)((function(){var e=!0;return b&&e&&x(b),function(){e=!1,x()}}),[b]);var f=Object(w.useMutation)(m),v=Object(o.a)(f,2),P=v[0],E=v[1].error,y=Object(w.useMutation)(S),D=Object(o.a)(y,2),F=D[0],I=D[1],B=I.loading,L=I.error;return E?(console.log({message:E}),Object(a.jsx)("p",{children:"Encountered a problem while adding new post"})):L?(console.log({message:L}),Object(a.jsx)("p",{children:"Not able to delete"})):j?Object(a.jsx)(C.a,{center:!0,content:"loading"}):Object(a.jsxs)(a.Fragment,{children:[Object(a.jsxs)("div",{className:l.a.app__inputPanel,children:[Object(a.jsx)("center",{children:Object(a.jsx)("h4",{children:Object(a.jsx)("strong",{children:"Notekeeper"})})}),Object(a.jsx)("input",{onChange:function(e){i(e.target.value)},value:n,placeholder:"Enter a title"}),Object(a.jsx)("input",{onChange:function(e){d(e.target.value)},value:p,placeholder:"Enter a description"}),Object(a.jsx)("button",{className:l.a.app__addBtn,disabled:!n&&!p,onClick:function(e){return function(e,t,n){e.preventDefault(),P({variables:{title:t,description:n},refetchQueries:["posts"]}),i(""),d("")}(e,n,p)},children:"Add Note"})]}),Object(a.jsx)("div",{className:l.a.app__row,children:Object(a.jsx)($.a,{children:!j&&!B&&h&&h.posts.map((function(e){return Object(a.jsx)(A.a,{sm:12,md:6,lg:4,children:Object(a.jsxs)(k.a,{shaded:!0,bordered:!0,className:l.a.app__card,children:[Object(a.jsxs)("div",{className:l.a.app__text,children:[Object(a.jsxs)("p",{children:[Object(a.jsx)("strong",{children:"Title :"})," ",e.title]}),Object(a.jsxs)("p",{children:[Object(a.jsx)("strong",{children:"Description :"})," ",e.description]})]}),Object(a.jsxs)("div",{className:l.a.app__buttons,children:[Object(a.jsx)(Q.a,{color:"red",onClick:function(){return t=e.id,void F({variables:{id:t},refetchQueries:["posts"]});var t},className:l.a.app__delete,children:"Delete Post"}),Object(a.jsx)(N.b,{to:"/update/".concat(e.id),children:Object(a.jsx)(Q.a,{appearance:"default",color:"green",className:l.a.app__updLink,children:"Update"})})]})]})},e.id)}))})})]})},y=n(81),D=n.n(y);var F=function(e){var t=e.match.params.postId,n=Object(w.useQuery)(v,{variables:{id:t}}),i=n.loading,r=n.data,s=Object(c.useState)(),p=Object(o.a)(s,2),d=p[0],l=p[1],u=Object(c.useState)(""),j=Object(o.a)(u,2),b=j[0],_=j[1],O=Object(c.useState)(""),h=Object(o.a)(O,2),x=h[0],f=h[1],g=Object(c.useState)(!1),m=Object(o.a)(g,2),S=m[0],$=m[1],A=Object(c.useState)(!1),k=Object(o.a)(A,2),E=k[0],y=k[1],F=Object(w.useMutation)(P),I=Object(o.a)(F,2),B=I[0],L=I[1],q=L.loading,M=L.error;return Object(c.useEffect)((function(){return l(r),function(){l()}}),[r]),q?Object(a.jsx)(C.a,{center:!0,content:"loading"}):M?Object(a.jsx)("p",{children:"Error while updating"}):Object(a.jsxs)(a.Fragment,{children:[!i&&d&&Object(a.jsxs)("div",{className:D.a.update__inputPanel,children:[Object(a.jsx)("input",{placeholder:d.post.title,value:b,onChange:function(e){$(!0),_(e.target.value)}}),Object(a.jsx)("input",{placeholder:d.post.description,value:x,onChange:function(e){y(!0),f(e.target.value)}})]}),Object(a.jsx)("div",{className:D.a.update__btnSave,children:Object(a.jsx)(N.b,{to:"/",children:Object(a.jsx)(Q.a,{color:"green",style:{width:"100px"},onClick:function(){return function(e,t,n){B(S||E?S?E?{variables:{id:e,title:t,description:n},refetchQueries:["post","posts"]}:{variables:{id:e,title:t,description:d.post.description},refetchQueries:["post","posts"]}:{variables:{id:e,title:d.post.title,description:n},refetchQueries:["post","posts"]}:{variables:{id:e,title:d.post.title,description:d.post.title},refetchQueries:["post","posts"]}),$(!1),y(!1)}(t,b,x)},children:"Save"})})}),Object(a.jsx)("div",{className:D.a.update__btnCancel,children:Object(a.jsx)(N.b,{to:"/",children:Object(a.jsx)(Q.a,{color:"red",style:{width:"100px"},children:"Cancel"})})})]})},I=n(15);n(306);var B=function(){return Object(a.jsx)(a.Fragment,{children:Object(a.jsx)(N.a,{children:Object(a.jsxs)(I.c,{children:[Object(a.jsx)(I.a,{exact:!0,path:"/",component:E}),Object(a.jsx)(I.a,{exact:!0,path:"/update/:postId",render:function(e){return Object(a.jsx)(F,Object(p.a)({},e))}})]})})})},L=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,317)).then((function(t){var n=t.getCLS,a=t.getFID,c=t.getFCP,i=t.getLCP,r=t.getTTFB;n(e),a(e),c(e),i(e),r(e)}))},q=n(172),M=n(175),T=n(176),U=Object(T.a)({uri:"/graphql"}),V=new q.a({link:U,cache:new M.a});s.a.render(Object(a.jsx)(i.a.StrictMode,{children:Object(a.jsx)(w.ApolloProvider,{client:V,children:Object(a.jsx)(B,{})})}),document.getElementById("root")),L()},37:function(e,t,n){e.exports={app__inputPanel:"App_app__inputPanel__1_X7N",app__addBtn:"App_app__addBtn__2qXG8",app__row:"App_app__row__eEwwR",app__card:"App_app__card__A44V7",app__text:"App_app__text__TwegK",app__buttons:"App_app__buttons__2iWfh",app__updLink:"App_app__updLink__1d1gf",app__delete:"App_app__delete__2VxQB"}},81:function(e,t,n){e.exports={update__inputPanel:"Update_update__inputPanel__2Ysr-",update__btnSave:"Update_update__btnSave__3hagV",update__btnCancel:"Update_update__btnCancel__rOX-l"}}},[[308,1,2]]]);
//# sourceMappingURL=main.c39d780a.chunk.js.map